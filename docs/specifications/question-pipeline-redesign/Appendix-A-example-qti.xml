<?xml version="1.0" encoding="UTF-8"?>
<!--
  Example QTI 3.0 XML with Embedded Feedback
  
  This shows the target format after the feedback enhancement pipeline.
  Key elements added by the pipeline:
  - qti-outcome-declaration for FEEDBACK and SOLUTION
  - qti-feedback-inline inside each qti-simple-choice
  - qti-feedback-block with worked solution at end of qti-item-body
  - qti-response-processing that sets FEEDBACK and SOLUTION outcomes
-->
<qti-assessment-item xmlns="http://www.imsglobal.org/xsd/imsqtiasi_v3p0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.imsglobal.org/xsd/imsqtiasi_v3p0 
        https://purl.imsglobal.org/spec/qti/v3p0/schema/xsd/imsqti_asiv3p0_v1p0.xsd" 
    identifier="question-6-juego-bolitas" 
    title="Cálculo de puntaje máximo en juego de lanzamiento de bolitas" 
    adaptive="false" 
    time-dependent="false">
  
  <qti-response-declaration identifier="RESPONSE" cardinality="single" base-type="identifier">
    <qti-correct-response>
      <qti-value>ChoiceC</qti-value>
    </qti-correct-response>
  </qti-response-declaration>
  
  <!-- Feedback outcome declarations (ADDED BY PIPELINE) -->
  <qti-outcome-declaration identifier="SCORE" cardinality="single" base-type="float">
    <qti-default-value>
      <qti-value>0</qti-value>
    </qti-default-value>
  </qti-outcome-declaration>
  <qti-outcome-declaration identifier="FEEDBACK" cardinality="single" base-type="identifier"/>
  <qti-outcome-declaration identifier="SOLUTION" cardinality="single" base-type="identifier"/>
  
  <qti-item-body>
    <p>Un juego consiste en lanzar cinco bolitas desde cierta distancia hacia los agujeros 
       de una caja. Los puntajes se asignan según el agujero por el cual entra la bolita:</p>
    <p>
      <img src="https://paes-question-images.s3.amazonaws.com/images/prueba-invierno-2025/Q6_main.png" 
           alt="Caja con tres agujeros: izquierda 3 puntos, centro 1 punto, derecha 5 puntos."/>
    </p>
    <p>Cuando una bolita no ingresa en alguno de los agujeros, se repite el lanzamiento. 
       El juego finaliza cuando todas las bolitas entran por uno de los agujeros.</p>
    <p>Una persona jugó este juego y se sabe que las bolitas ingresaron por los tres agujeros.</p>
    
    <qti-choice-interaction max-choices="1" response-identifier="RESPONSE">
      <qti-prompt>¿Cuál es el máximo puntaje que pudo haber obtenido?</qti-prompt>
      
      <qti-simple-choice identifier="ChoiceA">
        5
        <!-- Per-choice feedback (ADDED BY PIPELINE) -->
        <qti-feedback-inline outcome-identifier="FEEDBACK" identifier="ChoiceA" show-hide="show">
          Incorrecto. El valor 5 sería el puntaje de una sola bolita en el agujero de 5 puntos. 
          Como hay 5 bolitas y deben pasar por los tres agujeros, el puntaje total será mayor.
        </qti-feedback-inline>
      </qti-simple-choice>
      
      <qti-simple-choice identifier="ChoiceB">
        11
        <qti-feedback-inline outcome-identifier="FEEDBACK" identifier="ChoiceB" show-hide="show">
          Incorrecto. El puntaje 11 es posible (por ejemplo: 5+3+1+1+1), pero no es el máximo. 
          Para maximizar, debes usar más bolitas en los agujeros de mayor valor.
        </qti-feedback-inline>
      </qti-simple-choice>
      
      <qti-simple-choice identifier="ChoiceC">
        19
        <qti-feedback-inline outcome-identifier="FEEDBACK" identifier="ChoiceC" show-hide="show">
          ¡Correcto! Para maximizar el puntaje usando los tres agujeros con 5 bolitas: 
          3 bolitas en el de 5 puntos (15) + 1 en el de 3 puntos (3) + 1 en el de 1 punto (1) = 19.
        </qti-feedback-inline>
      </qti-simple-choice>
      
      <qti-simple-choice identifier="ChoiceD">
        25
        <qti-feedback-inline outcome-identifier="FEEDBACK" identifier="ChoiceD" show-hide="show">
          Incorrecto. El puntaje 25 requeriría 5 bolitas en el agujero de 5 puntos, 
          pero el enunciado indica que las bolitas entraron por los TRES agujeros.
        </qti-feedback-inline>
      </qti-simple-choice>
    </qti-choice-interaction>
    
    <!-- Worked solution (ADDED BY PIPELINE) -->
    <qti-feedback-block identifier="show" outcome-identifier="SOLUTION" show-hide="show">
      <qti-content-body>
        <p><strong>Estrategia de maximización con restricciones</strong></p>
        <ol>
          <li>Identificar la restricción: las 5 bolitas deben usar los 3 agujeros 
              (al menos 1 en cada uno).</li>
          <li>Asignar el mínimo obligatorio: 1 bolita en el de 1 punto, 
              1 en el de 3 puntos = 4 puntos.</li>
          <li>Maximizar con las restantes: las 3 bolitas restantes van al de 5 puntos 
              = 15 puntos.</li>
          <li>Calcular el total: 1 + 3 + 15 = 19 puntos.</li>
        </ol>
      </qti-content-body>
    </qti-feedback-block>
  </qti-item-body>
  
  <!-- Response processing with feedback (MODIFIED BY PIPELINE) -->
  <qti-response-processing>
    <qti-response-condition>
      <qti-response-if>
        <qti-match>
          <qti-variable identifier="RESPONSE"/>
          <qti-correct identifier="RESPONSE"/>
        </qti-match>
        <qti-set-outcome-value identifier="SCORE">
          <qti-base-value base-type="float">1</qti-base-value>
        </qti-set-outcome-value>
      </qti-response-if>
      <qti-response-else>
        <qti-set-outcome-value identifier="SCORE">
          <qti-base-value base-type="float">0</qti-base-value>
        </qti-set-outcome-value>
      </qti-response-else>
    </qti-response-condition>
    <qti-set-outcome-value identifier="FEEDBACK">
      <qti-variable identifier="RESPONSE"/>
    </qti-set-outcome-value>
    <qti-set-outcome-value identifier="SOLUTION">
      <qti-base-value base-type="identifier">show</qti-base-value>
    </qti-set-outcome-value>
  </qti-response-processing>
</qti-assessment-item>
